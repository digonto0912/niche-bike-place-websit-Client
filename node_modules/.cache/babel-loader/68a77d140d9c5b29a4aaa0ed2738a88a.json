{"ast":null,"code":"import _slicedToArray from\"/Users/sabbirziauddin/Desktop/Desktop \\u2013 sabbir\\u2019s MacBook Pro/project/Mileston 12/Assignment 12/bike-place-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from\"react\";import initializeFirebase from\"../Pages/Login/Login/Firebase/firebase.init\";import{getAuth,createUserWithEmailAndPassword,signOut,onAuthStateChanged,signInWithEmailAndPassword,GoogleAuthProvider,signInWithPopup}from\"firebase/auth\";//initialize firebase app\ninitializeFirebase();var useFirebase=function useFirebase(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),authError=_useState4[0],setAuthError=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),isLoading=_useState6[0],setIsLoading=_useState6[1];var auth=getAuth();var googleProvider=new GoogleAuthProvider();//sign in with google \nvar signInWithGoogle=function signInWithGoogle(){return signInWithPopup(auth,googleProvider);};// const signInWithGoogle =(location,history)=>{\n//     setIsLoading(true);\n//     signInWithPopup(auth, googleProvider)\n//         .then((result) => {\n//             const user = result.user;\n//             setAuthError('');\n//             // ...\n//         }).catch((error) => {\n//             setAuthError(error.messages);\n//         }).finally(()=>setIsLoading(false));\n// }\n//register with email and password \nvar registerUser=function registerUser(email,password){setIsLoading(true);createUserWithEmailAndPassword(auth,email,password).then(function(userCredential){setAuthError('');}).catch(function(error){setAuthError(error.message);}).finally(function(){return setIsLoading(false);});};// signed in user \nvar loginUser=function loginUser(email,password,location,history){setIsLoading(true);signInWithEmailAndPassword(auth,email,password).then(function(userCredential){var _location$state;var destination=(location===null||location===void 0?void 0:(_location$state=location.state)===null||_location$state===void 0?void 0:_location$state.from)||'/';history.replace(destination);setAuthError('');}).catch(function(error){setAuthError(error.message);}).finally(function(){return setIsLoading(false);});;};//observe the user \nuseEffect(function(){var unSubscribe=onAuthStateChanged(auth,function(user){if(user){setUser(user);}else{setUser({});}setIsLoading(false);});return function(){return unSubscribe;};},[]);//log out\nvar logOut=function logOut(){setIsLoading(true);signOut(auth).then(function(){// Sign-out successful.\n}).catch(function(error){// An error happened.\n}).finally(function(){return setIsLoading(false);});};return{user:user,isLoading:isLoading,registerUser:registerUser,logOut:logOut,loginUser:loginUser,signInWithGoogle:signInWithGoogle,setUser:setUser,authError:authError,setIsLoading:setIsLoading};};export default useFirebase;","map":{"version":3,"sources":["/Users/sabbirziauddin/Desktop/Desktop – sabbir’s MacBook Pro/project/Mileston 12/Assignment 12/bike-place-client/src/hooks/useFirebase.js"],"names":["useEffect","useState","initializeFirebase","getAuth","createUserWithEmailAndPassword","signOut","onAuthStateChanged","signInWithEmailAndPassword","GoogleAuthProvider","signInWithPopup","useFirebase","user","setUser","authError","setAuthError","isLoading","setIsLoading","auth","googleProvider","signInWithGoogle","registerUser","email","password","then","userCredential","catch","error","message","finally","loginUser","location","history","destination","state","from","replace","unSubscribe","logOut"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport initializeFirebase from \"../Pages/Login/Login/Firebase/firebase.init\";\nimport { getAuth, createUserWithEmailAndPassword, signOut, onAuthStateChanged, signInWithEmailAndPassword, GoogleAuthProvider, signInWithPopup} from \"firebase/auth\";\n\n\n\n//initialize firebase app\ninitializeFirebase();\n\nconst useFirebase =()=>{\n    const [user,setUser] =useState({});\n    const [authError,setAuthError] = useState('');\n    const [isLoading,setIsLoading] = useState(true);\n    const auth = getAuth();\n    const googleProvider = new GoogleAuthProvider();\n\n    //sign in with google \n    const signInWithGoogle = () => {\n\n        return signInWithPopup(auth, googleProvider)\n\n    }\n    // const signInWithGoogle =(location,history)=>{\n    //     setIsLoading(true);\n    //     signInWithPopup(auth, googleProvider)\n    //         .then((result) => {\n                \n    //             const user = result.user;\n    //             setAuthError('');\n    //             // ...\n    //         }).catch((error) => {\n                \n                \n    //             setAuthError(error.messages);\n    //         }).finally(()=>setIsLoading(false));\n    // }\n\n//register with email and password \n    const registerUser =(email,password)=>{\n        setIsLoading(true);\n        createUserWithEmailAndPassword(auth,email,password)\n        .then((userCredential) => {\n            setAuthError('');\n        })\n            .catch((error) => {\n                \n                setAuthError(error.message) ;\n              \n            })\n            .finally(()=>setIsLoading(false));\n    }\n    // signed in user \n    const loginUser = (email,password,location,history)=>{\n        setIsLoading(true);\n        signInWithEmailAndPassword(auth, email, password)\n            .then((userCredential) => {\n                const destination = location?.state?.from||'/';\n                history.replace(destination)\n               setAuthError('');\n            })\n            .catch((error) => {\n                setAuthError(error.message);\n            })\n            .finally(() => setIsLoading(false));;\n\n\n    }\n    //observe the user \n    useEffect(()=>{\n        const unSubscribe = onAuthStateChanged(auth, (user) => {\n            if (user) {\n                setUser(user)\n                \n            } else {\n                setUser({});\n                \n            }\n            setIsLoading(false);\n        });\n        return ()=>unSubscribe;\n\n    },[])\n\n    //log out\n    const logOut =()=>{\n        setIsLoading(true);\n        signOut(auth).then(() => {\n            // Sign-out successful.\n        }).catch((error) => {\n            // An error happened.\n        })\n        .finally(()=>setIsLoading(false));\n\n    }\n\n    return {\n        user,\n        isLoading,\n        registerUser,\n        logOut,\n        loginUser,\n        signInWithGoogle, setUser, authError, setIsLoading\n       \n    }\n\n}\n\nexport default useFirebase;"]},"metadata":{},"sourceType":"module"}